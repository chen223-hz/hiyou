{% extends "scenic/index.html" %}
{% block header %}

{% endblock %}

{% block content %}
<section class="content-header AllTitle">
  <h1>
    <small><i class="fa fa-cubes"></i><span><a href="javascript:void(0)">内容管理-内容修改</a></span></small> 
  </h1>        
</section>
<section class="content DevAdd">
  <div class="row">
    <div class="col-lg-6 col-md-12">
      <div class="box box-info" style="border-top:0px;">
          <form class="form-horizontal" action="/scenic/{{obj.pk}}/content_edit/" method="POST" accept-charset="utf-8" enctype="multipart/form-data">{% csrf_token %}
            <div class="box-body">
              <div class="pdrow">
              <section style=" border-bottom:1px solid #d2d6de ;">
              <h3 style="font-size:15px; border-left:4px solid #0073b7; margin-top: 0px;padding-left: 2px;color:#777;"></h3>
              </section>
			  <div class="form-group">
                <div class="col-sm-2 control-label"><label for="id_name">内容标题:</label></div>
                <div class="col-sm-10"><input class="form-control" id="id_title" name="title" type="text" style="margin-top:20px" value="{{obj.title}}"> <span class="helptext" style="color:#aaa">不能超过24中文字</span></div>
              </div>
			  <div class="form-group">
                <div class="col-sm-2 control-label"><label for="id_name">排序号:</label></div>
                <div class="col-sm-10"><input class="form-control" id="id_num" name="num" type="text" style="margin-top:20px" value="{{obj.num}}"> <span class="helptext" style="color:#aaa">0为排序最优先，必须整数</span></div>
              </div>
                <div class="form-group">
                  <div class="col-sm-2 control-label"><label for="id_username">封面图片:</label></div>
                  <div class="col-sm-10" ><img src="{% if obj.image %}/uploads/{{obj.image}}{% endif %}" id='show' style="width:200px;height:120px"><input style="margin:20px;"id="imgfile" name="imgfile" type="file" accept="image/png, image/jpeg" onchange="c()"> </div>
                </div>
				<div class="form-group">
                  <div class="col-sm-2 control-label"><label for="id_username">内容详情:</label></div>
                  <div class="col-sm-10"style="padding-right:30px;" ><textarea id="id_username" style="margin:20px;border-color:#9a9a9a;"name="text" class="form-control">{{obj.text}}</textarea></div>
                </div>
              </div>
            </div><!-- /.box-body -->
            <div class="box-footer pdrow">
                <div class="" style="width:40%; margin:auto;">
                  <button type="submit" class="btn btn-info " style="background-color: #0073b7; border:#0073b7; margin-right: 2%;">保存</button>
                  <a href="/scenic/{{obj.scenic_text.pk}}/text_content/"class="btn btn-info btn-default pull-right" data-dismiss="modal" style="background-color:#dd4b39; border:#dd4b39;color:#fff;">取消
                  </a>            
                </div>
            </div>
          </form>
        </div><!-- /.box -->
        <!-- general form elements disabled -->
      </div>
    </div>
  </section>
{% endblock %}

{% block script %}
{% load staticfiles %}
<script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
<script type="text/javascript" src="{% static "ckeditor/ckeditor/config.js" %}"></script>
<script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
<script type="text/javascript" src="{% static "ckeditor/ckeditor/plugins/image/dialogs/image.js" %}"></script>


<script type="text/javascript">

	function c () {
		var r= new FileReader();
		f=document.getElementById('imgfile').files[0];
		r.readAsDataURL(f);
		r.onload=function  (e) {
			document.getElementById('show').src=this.result;
		};
	}
CKEDITOR.replace( 'text' , {uiColor: ''});
</script>


{% endblock %}
